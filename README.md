# Подготовка к WorldSkills
## Пробую разные приемы и фичи
### 29.11.2019 22:00 UPD #1
* Добавлена форма авторизации
* Добавлена форма регистрации, полная проверка новых логина и пароля, отправка пользователя в БД
* Добавлен класс SqlQuery, содержащий функции C# для обращения к БД
* Добавлен класс Features, содержащий полезные для работы функции C#
* Добавлен класс SqlManager, упрощающий работу с SQL запросами
### 30.11.2019 11:00 UPD #2 
#### UPD #2.1 
* Добавил проверку логина при авторизации
* Улучшил читаемость методов с помощью **string.Format** (Приложение 1)
#### UPD #2.2 
* Добавил одну кнопку в меню для просмотра списка пользователей (доступно Директору)
* Создал форму UsersList, на которой расположен DataGridView
* Для вывода информации в этот DataGridView написал новую функцию *SqlQuery.Query_FillDataGridViewWithUsers(DataGridView)*, заполняющую DataGridView данными о пользователях
### 30.11.2019 19:00 UPD #3 
* Добавлены сортировка и фильтрация для UsersList
* В папку со скриптами добавлен новый скрипт, создающий базу с пользователями **и ингридиентами**
* Добавлена новая форма IngredientsList с DataGridView и подключением к БД
#### UPD #3.1 
* Добавлена фильтрация для IngrediensList
#### UPD #3.2
* Добавлена кнопка с удалением выбранного в DataGridView ингредиента из базы и из DataGridView
* Немного отредактирован класс SqlQuery
* Создана форма добавления нового ингредиента с подгрузкой данных для comboBox'ов из базы
#### UPD #3.3
* Единицы измерения вынесены в отдельную таблицу БД
* Обновлены скрипты группы Query_Ingredient_XXX в классе SqlQuery
* Реализована возможность добавления ингредиента в таблицу
* Добавлен счетчик записей на форме IngredientList
* На всех формах отстроена последовательность перехода (если жать на **TAB**, будет перемещаться по элементам формы в нормальном порядке)

> **ВАЖНО!**
>
> *Double конвертируется в string с запятой между целой и дробной частью, что может вызвать проблемы при запросе.*

#### UPD #3.4
* Добавил редактирование на форме IngredientList. Интересно сделал определение в comboBox'ax типа, ЕИ, фасовки. По сути, если быстро делать редактирование - можно совместить удаление и добавление: удаляем старый вариант и добавляем новый, даже если ничего не поменялось. Неоптимально, зато быстро.

### 01.12.2019 21:20 UPD #4
* В меню добавлена новая кнопка - кабинет пользователя.
* Создана форма UserCabinet, содержащая изображение пользователя.
* В UserCabinet с помощью Open/Save FileDialog можно импортировать/экспортировать изображение пользователя. По-хорошему, путь к картинке должен храниться в базе, но времени на это уже нет. *По сути, ничего нового, просто при загрузке формы подтягивать из базы путь, соответствующий логину*.

## *Последний UPD перед экзаменом. Всем спокойной ночи и удачи завтра на экзамене!*

## Ближайшие планы:
1. <del>добавить проверку полей при авторизации</del>
1. <del>переписать запросы в читаемую форму</del>
1. <del>добавить форму с DataGridView</del>
    * <del>сортировка</del>
    * <del>фильтрация</del>
2. <del>добавить ещё одну форму с DataGridView с ингредиентами</del>
    * <del>сортировка</del>
    * <del>фильтрация</del>
    * <del>*добавление*</del>
    * <del>удаление</del>
    * <del>**редактирование**</del>
3. <del>поработать с картинками в базе</del>
4. <del>поработать с OpenFileDialog и SaveFileDialog</del>
5. **Не обкакаться на экзамене!**


#### Приложение 1 ####
```csharp
public static void Query_NewUser(string login, string password, int role)
        {
            SqlManager manager = new SqlManager();
            manager.sql_connection.Open();

            string request = string.Format(@"INSERT INTO Users (User_Login, User_Password, Role_ID) " +
                                           @"VALUES ('{0}','{1}', {2})", 
                                           login, password, Convert.ToString(role));
            // ...
            // ...

            return;
        }
```
